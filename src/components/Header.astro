---
import Logo from "../assets/logo.png";
---

<header class="site-header">
  <div class="header-inner">
    <a href="/" class="logo-link">
      <img src={Logo.src} alt="Simgames logo" class="logo" />
    </a>

    <button class="burger" id="burger" type="button" aria-label="Ã…bn menu">
      <span class="burger-line"></span>
      <span class="burger-line"></span>
      <span class="burger-line"></span>
    </button>
  </div>

  <nav class="menu-panel" id="menu-panel" aria-hidden="true">
    <div class="menu-row">
      <div class="menu-links">
        <a href="/">Hjem</a>
        <a href="/kontakt">Kontakt</a>
        <a href="/booking">Booking</a>
        <a href="/om-os">Om os</a>
      </div>
      <button class="close-btn" id="close-btn" type="button" aria-label="Luk menu">X</button>
    </div>
  </nav>
</header>

<style>
  @font-face {
    font-family: "ArcadeClassic";
    src: url("/fonts/ARCADECLASSIC2.TTF");
  }

  .site-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    padding: 0.9rem 1.5rem;
    z-index: 1000;
    background: transparent;
  }

  .header-inner {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .logo-link {
    margin: 0 auto;
  }

  .logo {
    position: fixed;
    top: 1.5rem;
    left: 50%;
    transform: translateX(-50%);
    width: 70px;
    height: auto;
    display: block;
    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.85)) drop-shadow(0 0 25px rgba(255, 255, 255, 0.5));
    z-index: 1100;
    transition: transform 0.25s ease;
  }

  .logo:hover {
    transform: translateX(-50%) scale(1.12);
  }

  /* BURGER */
  .burger {
    position: absolute;
    right: 4rem;
    top: 50%;
    margin-top: 2rem;
    transform: translateY(-50%);
    width: 32px;
    height: 24px;
    cursor: pointer;
    border: none;
    padding: 0;
    background: transparent;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    transition: transform 0.25s ease;
  }

  .burger:hover {
    transform: translateY(-50%) scale(1.15);
  }

  .burger-line {
    width: 100%;
    height: 3px;
    background: #ffffff;
    border-radius: 4px;
    transition:
      transform 0.25s ease,
      opacity 0.25s ease;
  }

  .burger.active .burger-line:nth-child(1) {
    transform: translateY(9px) rotate(45deg);
  }

  .burger.active .burger-line:nth-child(2) {
    opacity: 0;
  }

  .burger.active .burger-line:nth-child(3) {
    transform: translateY(-9px) rotate(-45deg);
  }

  /* MENU OVERLAY */
  .menu-panel {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: auto;
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(4px);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 5rem 0 2rem 0; /* from top and a bit under links */
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
    transition:
      opacity 0.25s ease,
      transform 0.25s ease;
    font-family: "ArcadeClassic";
  }

  .menu-row {
    display: flex;
    align-items: center;
    position: relative;
    padding: 0 4rem;
    margin-right: 12rem;
    width: 100%;
    max-width: 1000px;
    justify-content: space-between;
  }

  .menu-links {
    display: flex;
    align-items: center;
    gap: 2rem;
    justify-content: center;
    flex: 1;
  }

  .menu-panel.active {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  .menu-panel a {
    color: #ffffff;
    text-decoration: none;
    letter-spacing: 2px;
    font-size: 1.4rem;
    display: inline-block;
  }

  .menu-panel a:hover {
    color: #ff7bf5;
  }

  .close-btn {
    font-size: 1.8rem;
    line-height: 1;
    cursor: pointer;
    background: transparent;
    color: #ffffff;
    border: none;
    padding: 0;
    margin-left: auto; /* pushes X to the far right */
    margin-right: -18rem; /* increase this number to push further */
    font-family:
      "Aldrich",
      system-ui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      sans-serif;
    user-select: none;
    transition:
      transform 0.25s ease,
      opacity 0.25s ease;
  }

  .close-btn:hover {
    transform: rotate(90deg) scale(1.15);
    opacity: 0.8;
  }

  @media (min-width: 900px) {
    .menu-panel {
      align-items: flex-start;
      padding-right: 3rem;
    }
  }
</style>

<script>
  if (typeof window !== "undefined") {
    const burger = document.getElementById("burger");
    const menu = document.getElementById("menu-panel");
    const closeBtn = document.getElementById("close-btn");

    if (!burger || !menu) {
      console.warn("Header burger or menu element not found");
    } else {
      const openMenu = () => {
        menu.classList.add("active");
        burger.classList.add("active");
        menu.setAttribute("aria-hidden", "false");
      };

      const closeMenu = () => {
        menu.classList.remove("active");
        burger.classList.remove("active");
        menu.setAttribute("aria-hidden", "true");
      };

      burger.addEventListener("click", () => {
        if (menu.classList.contains("active")) {
          closeMenu();
        } else {
          openMenu();
        }
      });

      if (closeBtn) {
        closeBtn.addEventListener("click", closeMenu);
      }

      const links = menu.querySelectorAll("a");
      links.forEach((link) => {
        link.addEventListener("click", closeMenu);
      });

      document.addEventListener("keydown", (event) => {
        if (event.key === "Escape") {
          closeMenu();
        }
      });
    }
  }
</script>
